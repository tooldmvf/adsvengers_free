{
  "pluginType": "JS",
  "pluginId": "js-plugin",
  "unpublishedAction": {
    "name": "insert_ai20_offer_v2",
    "fullyQualifiedName": "wf_offers.insert_ai20_offer_v2",
    "datasource": {
      "name": "UNUSED_DATASOURCE",
      "pluginId": "js-plugin",
      "messages": [],
      "isAutoGenerated": false,
      "deleted": false,
      "policies": [],
      "userPermissions": []
    },
    "pageId": "Campaign Name Builder Utility",
    "collectionId": "Campaign Name Builder Utility_wf_offers",
    "actionConfiguration": {
      "timeoutInMillisecond": 10000,
      "paginationType": "NONE",
      "encodeParamsToggle": true,
      "body": "async () => {\n  const object = await get_ai20_api_key.run();\n  const res = await get_ai20_offers_v2.run({\n    api_key: object[0].user_api_key\n  });\n  const res2 = JSON.parse(res);\n  for (const i in res2) {\n    var cat_short = '';\n    var cat_long = '';\n    if (res2[i][\"off_categories\"] !== undefined) {\n      cat_long = _.map(res2[i].off_categories, 'name').join(\",\");\n      cat_short = 'G';\n      if (cat_long.toLowerCase().includes('nutra') || cat_long.toLowerCase().includes('cosmetic')) cat_short = 'N';\n      if (cat_long.toLowerCase().includes('cloth') || cat_long.toLowerCase().includes('shoe')) cat_short = 'A';\n    }\n    await insert_offer_network.run({\n      offer_id_net: res2[i].off_id,\n      offer_name_net: res2[i].name,\n      fk_network_id: object[0].network_id,\n      off_category_net: cat_long,\n      off_cat_short: cat_short,\n      payout: res2[i].payout_cod\n    });\n  }\n  await get_offer_net.run();\n}",
      "selfReferencingDataPaths": [],
      "jsArguments": [],
      "isAsync": true
    },
    "executeOnLoad": false,
    "dynamicBindingPathList": [
      {
        "key": "body"
      }
    ],
    "isValid": true,
    "invalids": [],
    "messages": [],
    "jsonPathKeys": [
      "async () => {\n  const object = await get_ai20_api_key.run();\n  const res = await get_ai20_offers_v2.run({\n    api_key: object[0].user_api_key\n  });\n  const res2 = JSON.parse(res);\n  for (const i in res2) {\n    var cat_short = '';\n    var cat_long = '';\n    if (res2[i][\"off_categories\"] !== undefined) {\n      cat_long = _.map(res2[i].off_categories, 'name').join(\",\");\n      cat_short = 'G';\n      if (cat_long.toLowerCase().includes('nutra') || cat_long.toLowerCase().includes('cosmetic')) cat_short = 'N';\n      if (cat_long.toLowerCase().includes('cloth') || cat_long.toLowerCase().includes('shoe')) cat_short = 'A';\n    }\n    await insert_offer_network.run({\n      offer_id_net: res2[i].off_id,\n      offer_name_net: res2[i].name,\n      fk_network_id: object[0].network_id,\n      off_category_net: cat_long,\n      off_cat_short: cat_short,\n      payout: res2[i].payout_cod\n    });\n  }\n  await get_offer_net.run();\n}"
    ],
    "userSetOnLoad": false,
    "confirmBeforeExecute": false,
    "policies": [],
    "userPermissions": []
  },
  "id": "Campaign Name Builder Utility_wf_offers.insert_ai20_offer_v2",
  "deleted": false,
  "gitSyncId": "63c3151532584b547fffe91b_63d17c20409b837829628531"
}